<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h2>Consultar Endereço pelo CEP</h2>
    <input type="text" id="cep" placeholder="Digite o CEP" maxlength="9">
    <button onclick="buscarCEP()">Buscar</button>
    <h3>Resultado:</h3>
    <pre id="resultado"></pre>
    <script>
        async function buscarCEP() {
            const cep = document.getElementById("cep").value.replace(/\D/g, ''); //remova caracteres não numericos
            if (cep.length !== 8) {
                document.getElementById("resultado").innerText = "CEP invalido. Deve conter 8 dídgitos.";
                return
            }
            try {
                const resposta = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                const dados = await resposta.json();
                if (dados.erro) {
                    document.getElementById("resultado").innerText = "CEP não encontrado.";
                } else {
                    document.getElementById("resultado").innerText =
                    `CEP: ${dados.cep},
                    Logradouro: ${dados.logradouro},
                    Bairro: ${dados.bairro},
                    Cidade: ${dados.localidade},
                    Estado: ${dados.uf}`;   
                }
            } catch(erro) {
                document.getElementById("resultado").innerText = "Erro ao buscar o CEP.";
                console.error(erro);
            }
        } 
    </script>

</body>

</html>